@inject BlazorGenOptions Options

@if (PageActions.Count() > 0)
{
    <Bar Background="Background.Light" Breakpoint="Breakpoint.Desktop">
        <BarBrand>
            @(((BlazorgenBaseComponent) Context).Title)
        </BarBrand>
        <BarToggler />
        <BarMenu>
            <BarStart>
                @{
                    PopulateDictionary();

                    foreach (var item in ActionGroups)
                    {
                        var filtered = PageActions.Where(o => o.Attribute.Group == item.Key);
                        if (item.Key.ToLower() == "default" || item.Value == 1)
                        {
                            foreach (var action in filtered)
                            {
                                <BarItem>
                                    <BarLink @onclick="@(() => action.Method.Invoke(Context, null))">
                                        <Icon Name="@action.Attribute.Icon" />
                                        @(action.Attribute.Caption ?? action.Method.Name)
                                    </BarLink>
                                </BarItem>
                            }
                        }
                        else
                        {
                            <BarItem>
                                <BarDropdown>
                                    <BarDropdownToggle>@item.Key</BarDropdownToggle>
                                    <BarDropdownMenu>
                                        @foreach (var action in filtered)
                                        {
                                            <BarDropdownItem>
                                                <BarLink @onclick="@(() => action.Method.Invoke(Context, null))">
                                                    <Icon Name="@action.Attribute.Icon" />
                                                    @(action.Attribute.Caption ?? action.Method.Name)
                                                </BarLink>
                                            </BarDropdownItem>
                                        }
                                    </BarDropdownMenu>
                                </BarDropdown>
                            </BarItem>
                        }
                    }

                }
            </BarStart>
        </BarMenu>
        <BarEnd>
            @if (Options.ShowBreaddcrumbs)
            {
                <DynamicBreadcrumbs />
            }
    </BarEnd>
      </Bar>
}