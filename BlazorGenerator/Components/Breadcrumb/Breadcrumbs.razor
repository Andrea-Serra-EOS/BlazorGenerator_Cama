@inherits BlazorgenComponentBase;

@if (UriParts.Count > 0)
{
        <FluentBreadcrumb >
            <FluentBreadcrumbItem Href="/">
                Home
            </FluentBreadcrumbItem>
            <Virtualize Items="UriParts">
                <FluentBreadcrumbItem Href="@(context.Key)">
                    @(context.Value)
                </FluentBreadcrumbItem>
            </Virtualize>
        </FluentBreadcrumb>
}

@code {
    Dictionary<string, string> UriParts { get; set; }

    protected override void OnParametersSet()
    {
        var parts = NavManager.ToBaseRelativePath(NavManager.Uri.ToString());
        UriParts = new();
        if (parts != "")
        {
            var list = parts.Split('/');
            var BuildedUrl = "/";
            foreach (var item in list)
            {
                BuildedUrl += item + "/";
                UriParts.Add(BuildedUrl, item);
            }
        }
    }
}
