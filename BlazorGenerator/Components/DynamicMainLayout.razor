@inherits LayoutComponentBase
<Layout Sider="true">
	<LayoutSider>
		<LayoutSiderContent>
			<NavMenu />
		</LayoutSiderContent>
	</LayoutSider>
	<Layout>
		<CascadingValue Value="@this">
			<LayoutContent>
				<Blazorise.Container Padding="Padding.Is4.OnY" Fluid="true">
					<PageProgressAlert />
					<MessageAlert />
					<NotificationAlert />
					<ErrorBoundary @ref="errorBoundary">
						<ErrorContent>
							<DynamicErrorHandler errorBoundary="errorBoundary" />
						</ErrorContent>
						<ChildContent>
							@Body
						</ChildContent>
					</ErrorBoundary>
				</Blazorise.Container>
			</LayoutContent>
			<LayoutFooter Fixed=true Visibility="GetLogVisibility()">
				<Log></Log>
			</LayoutFooter>
		</CascadingValue>
	</Layout>
</Layout>

<HeadContent>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
	<link href="_content/Blazorise/blazorise.css" rel="stylesheet" />
	<link href="_content/Blazorise.Bootstrap/blazorise.bootstrap.css" rel="stylesheet" />
	<link href="_content/Blazorise.Snackbar/blazorise.snackbar.css" rel="stylesheet" />	
</HeadContent>

@code {
	private bool showLog = false;

	ErrorBoundary errorBoundary;

	private Visibility GetLogVisibility()
	{
		return showLog ? Visibility.Visible : Visibility.Invisible;
	}


	public void setLogVisibility(bool show)
	{
		showLog = show;
		StateHasChanged();
	}

	protected override void OnParametersSet()
	{
		showLog = false;
		errorBoundary?.Recover();
	}
}