@inherits BlazorgenBaseComponent

@if (UriParts.Count > 0)
{
	<Breadcrumb Margin="Margin.Is1.FromTop.Is1.FromBottom" Background="Background.Light" Border="Border.Is1.Rounded" Padding="Padding.Is1">
		<BreadcrumbItem>
			<BreadcrumbLink To="/">Home</BreadcrumbLink>
		</BreadcrumbItem>

		<Repeater Items="UriParts">
			<BreadcrumbItem Active="@(context.Equals(UriParts.Last()))">
				<BreadcrumbLink To="@(context.Key)">@(context.Value)</BreadcrumbLink>
			</BreadcrumbItem>
		</Repeater>
	</Breadcrumb>
}

@code {
	Dictionary<string, string> UriParts { get; set; }

	protected override void OnParametersSet()
	{
		var parts = NavManager.ToBaseRelativePath(NavManager.Uri.ToString());
		UriParts = new();
		if (parts != "")
		{
			var list = parts.Split('/');
			var BuildedUrl = "/";
			foreach (var item in list)
			{
				BuildedUrl += item + "/";
				UriParts.Add(BuildedUrl, item);
			}
		}
	}
}
