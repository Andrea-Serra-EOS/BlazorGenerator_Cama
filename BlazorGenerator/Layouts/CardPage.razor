@typeparam T
@inherits BlazorgenComponentBase

@{
  var PageActions = AttributesUtils.GetMethodsWithAttribute<PageActionAttribute>(this);
  var permissionSet = Security.GetPermissionSet(this.GetType());
}
<PageTitle>@Title</PageTitle>
@if (ShowActions)
{
  <ActionBar Context="this" PageActions="PageActions" />
}

<FluentGrid Spacing="3">
  @foreach (var context in VisibleFields)
  {
    <FluentGridItem md="GridSize">
      <FluentStack VerticalAlignment="VerticalAlignment.Center">
        <BlazorGeneratorFormFields Data="Content" field="context" T="T" />
      </FluentStack>
    </FluentGridItem>
  }
  @if (ShowButtons)
  {
    <FluentGridItem md="GridSize">
      <FluentStack VerticalAlignment="VerticalAlignment.Center">
        @if (permissionSet.Modify || permissionSet.Insert)
        {
          <FluentButton OnClick="@(() => Save(_data, OriginalContent))">Save</FluentButton>
        }
        @if (permissionSet.Delete)
        {
          <FluentButton OnClick="@(() => Discard(_data, OriginalContent))">Cancel</FluentButton>
        }
        </FluentStack>
    </FluentGridItem>
  }
</FluentGrid>
