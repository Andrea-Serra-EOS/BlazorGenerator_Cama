@typeparam T
@inherits BlazorgenComponentBase
@{
  var PageActions = AttributesUtils.GetMethodsWithAttribute<PageActionAttribute>(this);
  var gridActions = AttributesUtils.GetMethodsWithAttribute<GridActionAttribute>(this);
  var permissionSet = Security?.GetPermissionSet(this.GetType()).Result;


}
<PageTitle>@Title</PageTitle>
<div style="height:100%">
  @if (ShowActions)
  {
    <ActionBar Context="this" PageActions="PageActions" />
  }
  <FluentPullToRefresh Direction="@PullDirection.Down"
                       OnRefreshAsync="OnRefreshAsync"
                       ShowStaticTip="false"
                       Disabled="BlazorGeneratorSettings.Instance.DisablePullToRefresh"
                       Style="height: auto !important">

    <ChildContent>
      <ListDataGrid T="T"
                    Context="this"
                    Data="Content"
                    VisibleFields="VisibleFields"
                    OnDiscard="(data) => OnDelete(data)"
                    OnSave="(data) => OnSave(data)"
                    OnNewItem="()=> NewItem()"
                    PermissionSet="permissionSet"
                    @bind-Selected="Selected"
                    ShowButtons="ShowButtons"
                    GridActions="gridActions"
                    EditFormType="EditFormType"
                    RefreshData="@(async () => await LoadData())"/>

    </ChildContent>
  </FluentPullToRefresh>
</div>